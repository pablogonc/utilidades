/*
 * connection.h
 *
 *  Created on: 5 ago. 2021
 *      Author: utnso
 */

#ifndef SRC_UTILS_CONNECTION_CONNECTION_H_
#define SRC_UTILS_CONNECTION_CONNECTION_H_

#include <semaphore.h>
//MENSAJES
typedef enum //codigos de operaciones servidor
{
	connection_error_crear_socket = -4,
	connection_error_puerto_cupado,
	connection_error_Conexion_rechazada,
	connection_error_crear_hilo
}Connection_Code;


//PAQUETES
typedef struct
{
	int codigo_operacion;
	void* stream;

} connection_packet;

//MANEJO DE PAQUETES
connection_packet* connection_packet_create(int);

void connection_packet_add(connection_packet* packet, void* message, int operation);

void connection_packet_send(connection_packet* packet, int port);

void connection_packet_destroy(connection_packet* packet);


//CONEXION
int connection_start_server(char * ip,char * port,void* callFunction,sem_t* sockets_sem);

int connection_connect(char *ip, char* port);


//COMUNICACION

int connection_send(void* value,int port);

void* connection_recive(int socket,int size);

int connection_recive_int(int socket);

char* connection_recive_string(int socket);

#endif /* SRC_UTILS_CONNECTION_CONNECTION_H_ */
